import{e as g,r as n,u as j,a as v,V as c,b as x,j as t,B as y}from"./index-BrS_H_Qb.js";import{C as N,b}from"./card-FV4SwpdD.js";import{s as o}from"./socket-Cskg_VcQ.js";/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=g("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),R=()=>{const[d,r]=n.useState([]),[p,m]=n.useState(!0),h=j(),s=v(e=>e.user);n.useEffect(()=>(u(),o.on("roomUpdate",({roomId:e,participantCount:a})=>{r(i=>i.map(l=>l._id===e?{...l,participantCount:a}:l))}),o.on("roomDeleted",({roomId:e})=>{r(a=>a.filter(i=>i._id!==e)),c("A room has been deleted due to inactivity")}),()=>{o.off("roomUpdate"),o.off("roomDeleted")}),[]);const u=async()=>{try{m(!0);const e=await x.get("/rooms");r(e.data)}catch(e){console.error("Failed to fetch rooms:",e),c.error("Failed to load rooms")}finally{m(!1)}},f=async e=>{try{await x.post(`/rooms/join/${e}`),h(`/room/${e}`)}catch(a){console.error("Failed to join room:",a),c.error("Failed to join room")}};return p?t.jsx("div",{className:"min-h-[calc(100vh-4rem)] flex items-center justify-center",children:t.jsx("div",{className:"text-center",children:t.jsx("p",{className:"text-purple-600 font-semibold animate-pulse",children:"Loading rooms..."})})}):t.jsxs("div",{className:"container mx-auto px-4 py-12 flex flex-col items-center",children:[t.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-purple-700 mb-8 tracking-tight text-center drop-shadow-lg",children:"Available Rooms"}),d.length===0?t.jsx("div",{className:"text-center py-12 mt-12",children:t.jsx("p",{className:"text-gray-600 text-lg font-medium",children:"No rooms available. Create one to get started!"})}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mt-8 w-full",children:d.map(e=>t.jsx(N,{className:"rounded-2xl bg-white/90 shadow-xl hover:shadow-2xl transition-shadow border-0",children:t.jsx(b,{className:"p-8",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{children:t.jsx("h2",{className:"text-2xl font-bold text-purple-700 mb-1",children:e.name})}),t.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[t.jsx(w,{className:"h-4 w-4 text-purple-400"}),t.jsxs("span",{children:[e.participantCount||0," participants"]})]}),t.jsx(y,{onClick:()=>f(e._id),className:"w-full bg-purple-600 hover:bg-purple-500 text-white font-bold rounded-xl shadow-md transition",variant:e.creator._id===(s==null?void 0:s._id)?"outline":"default",children:e.creator._id===(s==null?void 0:s._id)?"Enter Room":"Join Room"})]})})},e._id))})]})};export{R as default};
